<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>ë°°ì°¨ ì‹œìŠ¤í…œ (ëª¨ë°”ì¼ ë¦¬ìŠ¤íŠ¸ ìƒ˜í”Œ)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- ì‹¤ì œ ì‚¬ìš© ì‹œ YOUR_KEY ë¥¼ ë„¤ì´ë²„ ì§€ë„ Client ID ë¡œ êµì²´ -->
    <script
      type="text/javascript"
      src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=ms2yp98bvf&submodules=geocoder"
    ></script>

    <style>
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #f3f4f6;
      }
      #map {
        width: 100%;
        height: 55vh;
      }

      #list {
        padding: 8px 8px 16px;
      }

      .card {
        background: #fff;
        margin: 8px 4px 10px;
        padding: 14px 14px 12px;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);
        font-size: 14px;
      }
      .card-title {
        font-weight: 700;
        margin-bottom: 4px;
        font-size: 15px;
      }
      .card-product {
        margin-top: 2px;
        font-size: 14px;
      }
      .card-meta {
        margin-top: 6px;
        font-size: 13px;
        color: #6b7280;
      }
      .card-order {
        margin-top: 4px;
        font-size: 12px;
        color: #4b5563;
      }

      .icon-row {
        display: flex;
        gap: 14px;
        margin-top: 10px;
        margin-bottom: 4px;
      }
      .icon-btn {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f3f4f6;
        border-radius: 999px;
        font-size: 21px;
        cursor: pointer;
        box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08) inset;
      }

      .detail {
        display: block;
        margin-top: 4px;
        font-size: 13px;
        color: #374151;
      }
      .detail-title {
        font-weight: 600;
        margin-bottom: 2px;
      }
      .detail ul {
        list-style: none;
        margin: 2px 0 0;
        padding-left: 0;
      }
      .detail li::before {
        content: "- ";
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div id="list"></div>

    <script>
      // ìƒ˜í”Œ ë°ì´í„° êµ¬ì¡°
      // ì‹¤ì œ ì—‘ì…€ ì—°ë™ ì‹œ: ì£¼ë¬¸ë²ˆí˜¸ = 5ë²ˆì§¸ ì»¬ëŸ¼, ìš´ì†¡ì¥ë²ˆí˜¸ = 6ë²ˆì§¸ ì»¬ëŸ¼ì— ë§¤í•‘í•˜ë©´ ë¨.
      const households = [
        {
          id: 1,
          lat: 37.0,
          lng: 127.0,
          address: "ê²½ê¸° í‰íƒì‹œ ì˜ˆì‹œë¡œ 1",
          phone: "01012345678",
          product:
            "ì‚¼ìµê°€êµ¬ ë””ì„¸í„° íŒ¨ë¸Œë¦­ í…œë°”ë³´ë“œ LEDì¡°ëª… ë¹…ì„œë 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ Q",
          vendor: "https://example.com/product/1",
          orderNo: "ORD-20251118-0001", // ì—‘ì…€ 5ë²ˆì§¸ ì—´
          invoiceNo: "INV-50248128604", // ì—‘ì…€ 6ë²ˆì§¸ ì—´ (ìš´ì†¡ì¥)
          setCount: 1,
          parts: [
            "ë””ì„¸í„° íŒ¨ë¸Œë¦­ í…œë°”ë³´ë“œ LEDì¡°ëª… ë¹…ì„œë 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ Q_ë³¸ì²´",
            "ë””ì„¸í„° íŒ¨ë¸Œë¦­ í…œë°”ë³´ë“œ LEDì¡°ëª… ë¹…ì„œë 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ Q_í—¤ë“œë³´ë“œ",
            "ë””ì„¸í„° íŒ¨ë¸Œë¦­ í…œë°”ë³´ë“œ LEDì¡°ëª… ë¹…ì„œë 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ Q_ì„œëì„¸íŠ¸",
            "ë””ì„¸í„° íŒ¨ë¸Œë¦­ í…œë°”ë³´ë“œ LEDì¡°ëª… ë¹…ì„œë 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ Q_ì¿ ì…˜2P",
          ],
        },
        {
          id: 2,
          lat: 37.01,
          lng: 127.001,
          address: "ê²½ê¸° í‰íƒì‹œ ì˜ˆì‹œë¡œ 2",
          phone: "01098765432",
          product: "í˜ë‹ˆì½” ë¦¬ì¸  ë¬´í—¤ë“œ 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ SS ì˜¤íŠ¸ë°€ë² ì´ì§€",
          vendor: "https://example.com/product/2",
          orderNo: "ORD-20251118-0002",
          invoiceNo: "INV-50434569370",
          setCount: 1,
          parts: [
            "í˜ë‹ˆì½” ë¦¬ì¸  ë¬´í—¤ë“œ 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ SS_ë³¸ì²´",
            "í˜ë‹ˆì½” ë¦¬ì¸  ë¬´í—¤ë“œ 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ SS_ë§¤íŠ¸ë¦¬ìŠ¤",
            "í˜ë‹ˆì½” ë¦¬ì¸  ë¬´í—¤ë“œ 3ë‹¨ ìˆ˜ë‚©ì¹¨ëŒ€ SS_ì„œëì„¸íŠ¸",
          ],
        },
      ];

      let map;

      function initMap() {
        map = new naver.maps.Map("map", {
          center: new naver.maps.LatLng(37.003, 127.0),
          zoom: 13,
        });

        households.forEach((h) => {
          const marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(h.lat, h.lng),
            map: map,
            icon: {
              content: `<div style="
          background:#2563eb;
          color:#fff;
          width:40px;
          height:40px;
          display:flex;
          align-items:center;
          justify-content:center;
          border-radius:999px;
          font-size:17px;
          box-shadow:0 2px 6px rgba(15,23,42,0.35);
        ">${h.parts.length}</div>`,
            },
          });

          naver.maps.Event.addListener(marker, "click", () =>
            scrollToCard(h.id)
          );
        });
      }

      function scrollToCard(id) {
        const el = document.getElementById("card-" + id);
        if (el) {
          el.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      }

      function renderList() {
        const list = document.getElementById("list");
        list.innerHTML = "";

        households.forEach((h) => {
          const div = document.createElement("div");
          div.className = "card";
          div.id = "card-" + h.id;

          const partsHtml = h.parts.map((p) => `<li>${p}</li>`).join("");

          div.innerHTML = `
      <div class="card-title">${h.address}</div>
      <div class="card-product">ğŸ›ï¸ ${h.product}</div>

      <div class="card-meta">
        ì„¸íŠ¸ ${h.setCount}ê°œ Â· ë¶€í’ˆ ${h.parts.length}ê°œ
      </div>

      <div class="card-order">
        ì£¼ë¬¸ë²ˆí˜¸ ${h.orderNo} Â· ìš´ì†¡ì¥ ${h.invoiceNo}
      </div>

      <div class="icon-row">
        <div class="icon-btn" onclick="window.location.href='tel:${h.phone}'">ğŸ“</div>
        <div class="icon-btn" onclick="window.open('${h.vendor}','_blank')">ğŸ›’</div>
        <div class="icon-btn" onclick="toggleDetail(${h.id})">ğŸ“¦</div>
      </div>

      <div class="detail" id="detail-${h.id}">
        <div class="detail-title">ìƒì„¸ í’ˆëª©</div>
        <ul>
          ${partsHtml}
        </ul>
      </div>
    `;
          list.appendChild(div);
        });
      }

      function toggleDetail(id) {
        const el = document.getElementById("detail-" + id);
        if (!el) return;
        if (el.style.display === "none" || el.style.display === "") {
          el.style.display = "block";
        } else {
          el.style.display = "none";
        }
      }

      window.onload = function () {
        initMap();
        renderList();
      };
    </script>
  </body>
</html>
